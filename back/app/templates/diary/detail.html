{% extends "base.html" %} {% block title %}일기 상세보기 - MyPet's Voice{%
endblock %} {% block content %}
<!-- CSS 링크 -->
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/diary/detail.css') }}"
/>

<div class="min-h-screen bg-gray-50">
  <div class="max-w-4xl mx-auto px-4 py-4">
    <!-- 뒤로가기 버튼 -->
    <div class="mb-6">
      <button onclick="history.back()" class="back-btn">
        <i class="fas fa-arrow-left mr-2"></i>
        목록으로 돌아가기
      </button>
    </div>

    <!-- 로딩 상태 -->
    <div id="loadingState" class="text-center py-12">
      <i class="fas fa-spinner fa-spin text-4xl text-orange-400 mb-4"></i>
      <p class="text-gray-600">일기를 불러오는 중...</p>
    </div>

    <!-- 일기 상세 내용 -->
    <div id="diaryContent" class="hidden">
      <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
        <!-- 헤더 -->
        <div
          class="bg-gradient-to-r from-orange-400 to-yellow-400 p-6 text-white"
        >
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center space-x-3">
              <div
                id="petEmoji"
                class="w-16 h-16 rounded-full bg-white/20 flex items-center justify-center text-3xl"
              ></div>
              <div>
                <h1 id="diaryTitle" class="text-2xl font-bold mb-1"></h1>
                <p id="petInfo" class="text-orange-100"></p>
              </div>
            </div>
            <div class="text-right">
              <p id="diaryDate" class="text-orange-100 mb-1"></p>
              <div class="flex items-center space-x-4">
                <span
                  id="weatherInfo"
                  class="bg-white/20 px-3 py-1 rounded-full text-sm"
                ></span>
                <span id="moodInfo" class="text-3xl"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- 본문 -->
        <div class="p-8">
          <!-- 사진 갤러리 -->
          <div id="photoGallery" class="mb-8 hidden">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">
              <i class="fas fa-images text-orange-400 mr-2"></i>
              오늘의 사진
            </h3>
            <div
              id="photoGrid"
              class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
            >
              <!-- 사진들이 여기에 동적으로 추가됩니다 -->
            </div>
          </div>

          <!-- 일기 내용 -->
          <div class="space-y-6">
            <!-- AI가 변환한 반려동물 관점 내용 -->
            <div id="aiContent" class="hidden">
              <h3 class="text-lg font-semibold text-gray-800 mb-3">
                <i class="fas fa-robot text-green-500 mr-2"></i>
                <span id="petName"></span>의 일기
                <span
                  class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full ml-2"
                  >AI</span
                >
              </h3>
              <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                <div
                  id="aiContentText"
                  class="text-gray-800 leading-relaxed whitespace-pre-wrap"
                ></div>
              </div>
            </div>
          </div>

          <!-- 액션 버튼들 -->
          <div
            class="flex flex-col sm:flex-row justify-center items-center gap-4 mt-8 pt-6 border-t border-gray-200"
          >
            <div class="flex space-x-4">
              <button id="deleteBtn" class="delete-btn" onclick="deleteDiary()">
                <i class="fas fa-trash mr-2"></i>
                삭제하기
              </button>
              <button onclick="location.href='/diary/write'" class="write-btn">
                <i class="fas fa-plus mr-2"></i>
                새 일기 쓰기
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 에러 상태 -->
    <div id="errorState" class="hidden text-center py-12">
      <i class="fas fa-exclamation-triangle text-4xl text-red-400 mb-4"></i>
      <p class="text-gray-600 mb-4">일기를 불러올 수 없습니다.</p>
      <button onclick="location.href='/diary/'" class="back-btn">
        목록으로 돌아가기
      </button>
    </div>
  </div>
</div>

<!-- 이미지 모달 -->
<div id="imageModal" class="image-modal hidden">
  <div class="image-modal-content">
    <span class="image-modal-close" onclick="closeImageModal()">&times;</span>
    <img id="modalImage" src="" alt="" />
    <div class="image-modal-nav">
      <button id="prevImageBtn" class="nav-btn" onclick="previousImage()">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button id="nextImageBtn" class="nav-btn" onclick="nextImage()">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='js/diary/detail.js') }}"></script>

<script>
  window.DIARY_ID = parseInt("{{ diary_id }}");
</script>

{% endblock %}
